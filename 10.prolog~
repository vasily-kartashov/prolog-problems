:- use_module(library(lists)).
:- use_module(library(clpz)).

list_rlencoded([], []).
list_rlencoded(A, [[N,C]|T]):-
    list_top_length_tail(A, C, N, U),
    list_rlencoded(U, T).

list_top_length_tail([A], A, 1, []).
list_top_length_tail([A,B|C], A, 1, [B|C]) :-
    dif(A, B).
list_top_length_tail([A,A|C], A, N, T) :-
    N #> 1,
    N #= N1 + 1,
    list_top_length_tail([A|C], A, N1, T).

